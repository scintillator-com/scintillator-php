```
Git:
Pre-setup:  to deploy private repo, generate PAT with full `repo` permissions
https://stackoverflow.com/questions/42148841/github-clone-with-oauth-access-token




AWS:
A) Launch Instance
		1) Choose AMI
	    - Amazon Linux 2 AMI (HVM), SSD Volume Type
	    - ami-0be2609ba883822ec (64-bit x86)
		2) Choose Instance Type
	    - t2.micro



AWS EC2 Clean install:
amazon-linux-extras install php7.4
amazon-linux-extras install nginx1
amazon-linux-extras install python3.8

#is this needed?
sudo ln -s /usr/bin/python3.8 /usr/bin/python3


#installing mongodb
https://docs.mongodb.com/manual/tutorial/install-mongodb-on-amazon/
sudo systemctl start mongod
sudo systemctl enable mongod


#create local users...

sudo useradd -m -U herodev
sudo passwd herodev
sudo usermod -a -G wheel herodev


## install certs?





mkdir sites


cd ~/sites
git clone https://github.com/scintillator-com/mitm-addon.git
cd mitm-addon
git checkout develop
#TODO: git checkout tags/0.1.0
mkdir logs


#CEE: mitmproxy:  dev version is commit a42d071995e70e39010d91233d768f25b73a7f95
cd ~/sites
git clone https://github.com/mitmproxy/mitmproxy.git
cd mitmproxy
git checkout tags/v6.0.0


ln -s ~/sites/mitm-addon ~/sites/mitmproxy/scintillator
echo "dnspython==2.0.0" >> requirements.txt
echo "pymongo==3.11.2" >> requirements.txt

#ref: https://github.com/mitmproxy/mitmproxy/blob/master/CONTRIBUTING.md
./dev.sh
//installed requests-2.25.1
. venv/bin/activate

ref: https://stackoverflow.com/questions/52068746/mitmproxy-client-connection-killed-by-block-global
mitmdump --set block_global=false -s scintillator/scintillator.py


Whitelisted AWS public IP within Atlas
savant
Q5z!TB2$92MaSzgZ
#TODO:  SSL?




#composer...





sudo amazon-linux-extras list php7.2-apc
sudo amazon-linux-extras install php7.2-apc

TODO: python 3.x
TODO: pymongo



sudo yum install php-xml.x86_64 php-pecl-uuid.x86_64 php-mbstring.x86_64
sudo yum install openssl-devel.x86_64


sudo yum install gcc
sudo yum install php-devel
sudo yum install php-pear
sudo pecl channel-update pecl.php.net
sudo pecl install mongodb

running: make INSTALL_ROOT="/var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0" install
Installing shared extensions:     /var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0/usr/lib64/php/modules/
running: find "/var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0" | xargs ls -dils
  191080    0 drwxr-xr-x 3 root root      17 Jan 27 02:23 /var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0
 4606341    0 drwxr-xr-x 3 root root      19 Jan 27 02:23 /var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0/usr
 8486482    0 drwxr-xr-x 3 root root      17 Jan 27 02:23 /var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0/usr/lib64
14402729    0 drwxr-xr-x 3 root root      21 Jan 27 02:23 /var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0/usr/lib64/php
16838387    0 drwxr-xr-x 2 root root      24 Jan 27 02:23 /var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0/usr/lib64/php/modules
16838388 6080 -rwxr-xr-x 1 root root 6222128 Jan 27 02:23 /var/tmp/pear-build-rootxxo2Yc/install-mongodb-1.9.0/usr/lib64/php/modules/mongodb.so

Build process completed successfully
Installing '/usr/lib64/php/modules/mongodb.so'
install ok: channel://pecl.php.net/mongodb-1.9.0
configuration option "php_ini" is not set to php.ini location
You should add "extension=mongodb.so" to php.ini







php-composer.sh require mongodb/mongodb





#what is "nodes"?



openssl req -new \
  -newkey rsa:2048 \
	-nodes \
	-out proxy_scintillator_com.csr \
	-keyout proxy_scintillator_com.key \
	-subj "CN=proxy.scintillator.com"





Last login: Fri Jan 22 16:33:14 2021 from 174-29-59-36.hlrn.qwest.net

       __|  __|_  )
       _|  (     /   Amazon Linux 2 AMI
      ___|\___|___|

https://aws.amazon.com/amazon-linux-2/
3 package(s) needed for security, out of 6 available
Run "sudo yum update" to apply all updates.
[ec2-user@ip-172-31-61-14 ~]$ ps ax | grep nginx
 4759 pts/1    S+     0:00 grep --color=auto nginx
[ec2-user@ip-172-31-61-14 ~]$ sudo systemctl status nginx
● nginx.service - The nginx HTTP and reverse proxy server
   Loaded: loaded (/usr/lib/systemd/system/nginx.service; disabled; vendor preset: disabled)
  Drop-In: /usr/lib/systemd/system/nginx.service.d
           └─php-fpm.conf
   Active: inactive (dead)

Jan 02 00:14:14 ip-172-31-61-14.ec2.internal systemd[1]: Unit nginx.service cannot be reloaded because it is in...ve.
Hint: Some lines were ellipsized, use -l to show in full.
[ec2-user@ip-172-31-61-14 ~]$ sudo systemctl enable -- now nginx
Failed to execute operation: No such file or directory
[ec2-user@ip-172-31-61-14 ~]$ sudo systemctl enable --now nginx
Created symlink from /etc/systemd/system/multi-user.target.wants/nginx.service to /usr/lib/systemd/system/nginx.service.
[ec2-user@ip-172-31-61-14 ~]$



```